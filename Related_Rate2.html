<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Bài giảng: Vận tốc của các đại lượng liên quan</title>
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- MathJax -->
    <script>
      MathJax = {
        tex: {
          inlineMath: [['$', '$'], ['\\(', '\\)']],
          displayMath: [['$$', '$$'], ['\\[', '\\]']],
          processEscapes: true,
          processEnvironments: true
        },
        options: {
          skipHtmlTags: ['script', 'noscript', 'style', 'textarea', 'pre']
        }
      };
    </script>
    <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js" id="MathJax-script"></script>
    <style>
      .slide-container { position: relative; width: 100%; height: 100%; overflow: hidden; }
      .slide { 
        position: absolute; 
        width: 100%; 
        opacity: 0; 
        transform: translateX(100%); 
        transition: opacity 0.3s ease, transform 0.3s ease; 
        padding: 1.5rem; 
      }
      .slide.active { 
        opacity: 1; 
        transform: translateX(0); 
      }
      .slide-nav { 
        position: sticky; 
        bottom: 0; 
        background: white; 
        padding: 1rem; 
        border-top: 1px solid #e5e7eb; 
        display: flex; 
        justify-content: space-between; 
      }
    </style>
</head>
<body class="bg-gray-100 font-sans">

<div class="h-screen w-full grid grid-cols-1 md:grid-cols-2 gap-4 p-4">
  <!-- CỘT TRÁI: BÀI GIẢNG (SLIDES) -->
  <div class="flex flex-col h-full bg-white rounded-lg shadow-lg">
    <div class="slide-container flex-grow">
      <!-- Slide 1 -->
      <div class="slide active">
        <h1 class="text-3xl font-bold text-blue-900 mb-4 border-b pb-4">Vận tốc của các đại lượng liên quan</h1>
      </div>
      <!-- Slide 2 -->
      <div class="slide">
        <div class="p-4 border-l-4 border-blue-500 bg-blue-50 rounded-r-lg">
          <h2 class="text-xl font-semibold mb-2">Mục tiêu bài học</h2>
          <ul class="list-disc ml-5 text-gray-800">
            <li>Hiểu rõ khái niệm "Related Rates".</li>
            <li>Biết khi nào và tại sao cần dùng "Related Rates".</li>
            <li>Áp dụng quy tắc chuỗi để tìm vận tốc của đại lượng liên quan.</li>
          </ul>
        </div>
      </div>
      <!-- Slide 3 -->
      <div class="slide">
        <div class="p-4 border-l-4 border-purple-500 bg-purple-50 rounded-r-lg">
          <h2 class="text-xl font-semibold mb-2">Related Rates là gì?</h2>
          <p>
            Related Rates là bài toán:
          </p>
          <ul class="list-disc ml-5 text-gray-800">
            <li>Biết vận tốc thay đổi (đạo hàm) của một đại lượng $A$: $\frac{dA}{dt}$.</li>
            <li>Cần tính vận tốc thay đổi của đại lượng $B$: $\frac{dB}{dt}$.</li>
          </ul>
          <p class="mt-3">
            Chiến lược: Dựa vào mối quan hệ giữa $A$ và $B$ để liên kết các đạo hàm theo thời gian.
          </p>
        </div>
      </div>
      <!-- Slide 4 -->
      <div class="slide">
        <div class="p-4 border-l-4 border-green-500 bg-green-50 rounded-r-lg">
          <h2 class="text-xl font-semibold mb-2">Ý tưởng cốt lõi</h2>
          <p>
            Giả sử $A$ và $B$ phụ thuộc vào thời gian $t$ và có mối quan hệ $f(A, B) = 0$.<br>
            Lấy đạo hàm hai vế theo $t$ để tìm $\frac{dB}{dt}$ từ $\frac{dA}{dt}$.
          </p>
        </div>
      </div>
      <!-- Slide 5 -->
      <div class="slide">
        <div class="p-4 border-l-4 border-yellow-500 bg-yellow-50 rounded-r-lg">
          <h2 class="text-xl font-semibold mb-2">Ví dụ minh họa trực quan</h2>
          <p><b>Đề bài:</b></p>
          <ul class="list-disc ml-5 text-gray-800">
            <li>Cạnh hình vuông tăng $5 \, \mathrm{cm/s}$.</li>
            <li>Khi cạnh là $7 \, \mathrm{cm}$, diện tích tăng bao nhiêu?</li>
          </ul>
          <p><b>Giải:</b></p>
          $$
          \begin{aligned}
            & A = x^2 \\
            & \frac{dA}{dt} = 2x \cdot \frac{dx}{dt} \\
            & \text{Khi } x = 7, \frac{dx}{dt} = 5: \\
            & \frac{dA}{dt} = 2 \cdot 7 \cdot 5 = 70 \, \mathrm{cm^2/s}
          \end{aligned}
          $$
        </div>
      </div>
      <!-- Slide 6 -->
      <div class="slide">
        <div class="p-4 border-l-4 border-gray-500 bg-gray-50 rounded-r-lg">
          <h2 class="text-xl font-semibold mb-2">Các bước giải bài toán Related Rates</h2>
          <ol class="list-decimal ml-5 text-gray-800">
            <li>Vẽ hình minh họa (nếu có hình học).</li>
            <li>Đặt tên các đại lượng thay đổi theo thời gian.</li>
            <li>Viết phương trình liên hệ giữa các đại lượng.</li>
            <li>Lấy đạo hàm hai vế theo $t$.</li>
            <li>Thay các giá trị đã biết để tính toán.</li>
            <li>Ghi rõ đơn vị kết quả.</li>
          </ol>
        </div>
      </div>
      <!-- Slide 7 -->
      <div class="slide">
        <div class="p-4 border-l-4 border-blue-500 bg-blue-50 rounded-r-lg">
          <h2 class="text-xl font-semibold mb-2">Tổng kết</h2>
          <ul class="list-disc ml-5 text-gray-800">
            <li>Related Rates giúp tìm đạo hàm $\frac{dB}{dt}$ từ $\frac{dA}{dt}$.</li>
            <li>Cốt lõi là tìm phương trình liên hệ giữa các đại lượng.</li>
            <li>Lưu ý đúng quy tắc chuỗi khi lấy đạo hàm.</li>
            <li>Áp dụng trong hình học, vật lý, kinh tế,...</li>
          </ul>
        </div>
      </div>
    </div>
    <!-- Navigation Buttons -->
    <div class="slide-nav">
      <button id="prev-slide" class="bg-blue-500 text-white px-4 py-2 rounded hover:bg-blue-600 disabled:bg-gray-300">Trang trước</button>
      <button id="next-slide" class="bg-blue-500 text-white px-4 py-2 rounded hover:bg-blue-600 disabled:bg-gray-300">Trang sau</button>
    </div>
  </div>

  <!-- CỘT PHẢI: CHỈ GIỮ ÂM THANH -->
  <div class="flex flex-col h-full space-y-4">
    <!-- AUDIO PLAYER -->
    <div class="bg-white rounded-lg shadow-lg p-4 mb-2 sticky top-0 z-20">
      <h2 class="text-lg font-bold text-gray-800 mb-2">Âm thanh minh họa bài giảng</h2>
      <audio id="audio-player" src="https://voca.ro/1odNBlEHwO8a" preload="auto" class="hidden"></audio>
      <div class="flex items-center space-x-4">
        <button id="play-pause-btn" class="bg-blue-500 text-white rounded-full w-12 h-12 flex items-center justify-center text-2xl hover:bg-blue-600 transition-transform transform hover:scale-105">
          <svg id="play-icon" xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M14.752 11.168l-3.197-2.132A1 1 0 0010 9.87v4.263a1 1 0 001.555.832l3.197-2.132a1 1 0 000-1.664z" />
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 12a9 9 0 11-18 0 9 9 0 0118 0z" />
          </svg>
          <svg id="pause-icon" xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 hidden" fill="none" viewBox="0 0 24 24" stroke="currentColor">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 9v6m4-6v6m7-3a9 9 0 11-18 0 9 9 0 0118 0z" />
          </svg>
        </button>
        <div class="flex-grow">
          <input type="range" id="progress-bar" value="0" min="0" max="100" class="w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer">
          <div class="flex justify-between text-xs text-gray-500 mt-1">
            <span id="current-time">00:00</span>
            <span id="total-time">00:00</span>
          </div>
        </div>
      </div>
      <div class="mt-3 flex flex-col md:flex-row gap-2">
        <label class="block text-sm font-medium text-gray-700 flex-1">
          Tải lên file âm thanh khác:
          <input type="file" id="audio-upload" accept="audio/*" class="mt-1 block w-full text-sm text-gray-500 file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-blue-50 file:text-blue-700 hover:file:bg-blue-100"/>
        </label>
        <label class="block text-sm font-medium text-gray-700 flex-1">
          Hoặc dán đường dẫn file âm thanh:
          <input type="text" id="audio-link" placeholder="Dán link audio..." class="mt-1 block w-full px-2 py-1 rounded border border-gray-300 focus:ring-2 focus:ring-blue-300"/>
          <button id="set-link-btn" class="mt-2 w-full bg-blue-500 hover:bg-blue-600 text-white font-semibold py-1 px-2 rounded transition">Phát từ link này</button>
        </label>
      </div>
    </div>
  </div>
</div>

<script>
// Slide Navigation
const slides = document.querySelectorAll('.slide');
const prevBtn = document.getElementById('prev-slide');
const nextBtn = document.getElementById('next-slide');
let currentSlide = 0;

function updateSlide() {
    slides.forEach((slide, index) => {
        slide.classList.toggle('active', index === currentSlide);
        if (index === currentSlide) {
            slide.style.transform = 'translateX(0)';
            slide.style.opacity = '1';
        } else if (index < currentSlide) {
            slide.style.transform = 'translateX(-100%)';
            slide.style.opacity = '0';
        } else {
            slide.style.transform = 'translateX(100%)';
            slide.style.opacity = '0';
        }
    });
    prevBtn.disabled = currentSlide === 0;
    nextBtn.disabled = currentSlide === slides.length - 1;
    if (window.MathJax) MathJax.typesetPromise([slides[currentSlide]]);
}

prevBtn.addEventListener('click', () => {
    if (currentSlide > 0) {
        currentSlide--;
        updateSlide();
    }
});

nextBtn.addEventListener('click', () => {
    if (currentSlide < slides.length - 1) {
        currentSlide++;
        updateSlide();
    }
});

// Initial slide setup
updateSlide();

// ========== AUDIO PLAYER ==========
const audio = document.getElementById('audio-player');
const playPauseBtn = document.getElementById('play-pause-btn');
const playIcon = document.getElementById('play-icon');
const pauseIcon = document.getElementById('pause-icon');
const progressBar = document.getElementById('progress-bar');
const currentTimeEl = document.getElementById('current-time');
const totalTimeEl = document.getElementById('total-time');
const audioUpload = document.getElementById('audio-upload');
const audioLink = document.getElementById('audio-link');
const setLinkBtn = document.getElementById('set-link-btn');

function formatTime(seconds) {
    if (isNaN(seconds)) return '00:00';
    const minutes = Math.floor(seconds / 60);
    const secs = Math.floor(seconds % 60);
    return `${minutes.toString().padStart(2, '0')}:${secs.toString().padStart(2, '0')}`;
}
function togglePlayPause() {
    if (audio.paused) {
        audio.play();
        playIcon.classList.add('hidden');
        pauseIcon.classList.remove('hidden');
    } else {
        audio.pause();
        playIcon.classList.remove('hidden');
        pauseIcon.classList.add('hidden');
    }
}
function updateProgress() {
    progressBar.value = (audio.currentTime / audio.duration) * 100 || 0;
    currentTimeEl.textContent = formatTime(audio.currentTime);
}
function setAudioTime() {
    audio.currentTime = (progressBar.value / 100) * audio.duration;
}
audio.addEventListener('loadedmetadata', () => {
    totalTimeEl.textContent = formatTime(audio.duration);
});
audio.addEventListener('timeupdate', updateProgress);
playPauseBtn.addEventListener('click', togglePlayPause);
progressBar.addEventListener('input', setAudioTime);

audioUpload.addEventListener('change', (event) => {
    const file = event.target.files[0];
    if (file) {
        const fileURL = URL.createObjectURL(file);
        audio.src = fileURL;
        audio.load();
        playIcon.classList.add('hidden');
        pauseIcon.classList.remove('hidden');
        audio.play().catch(()=>{});
    }
});
audio.addEventListener('ended', () => {
    playIcon.classList.remove('hidden');
    pauseIcon.classList.add('hidden');
});
setLinkBtn.addEventListener('click', () => {
    const link = audioLink.value.trim();
    if (link) {
        audio.src = link;
        audio.load();
        playIcon.classList.add('hidden');
        pauseIcon.classList.remove('hidden');
        audio.play().catch(()=>{});
    }
});
</script>
</body>
</html>